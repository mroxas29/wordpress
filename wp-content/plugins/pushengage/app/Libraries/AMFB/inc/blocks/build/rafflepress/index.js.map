{"version":3,"file":"rafflepress/index.js","mappings":"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","sources":["webpack://faux-block/./src/FetchPlugin.js","webpack://faux-block/./src/edit.js","webpack://faux-block/./src/editor.scss?0339","webpack://faux-block/external window \"React\"","webpack://faux-block/external window [\"wp\",\"apiFetch\"]","webpack://faux-block/external window [\"wp\",\"blocks\"]","webpack://faux-block/external window [\"wp\",\"components\"]","webpack://faux-block/external window [\"wp\",\"data\"]","webpack://faux-block/external window [\"wp\",\"i18n\"]","webpack://faux-block/webpack/bootstrap","webpack://faux-block/webpack/runtime/compat get default export","webpack://faux-block/webpack/runtime/define property getters","webpack://faux-block/webpack/runtime/hasOwnProperty shorthand","webpack://faux-block/webpack/runtime/make namespace object","webpack://faux-block/./src/rafflepress/index.js"],"sourcesContent":["import apiFetch from '@wordpress/api-fetch';\n\nexport default function FetchPlugin(pluginPath) {\n\n\tconst reload = () => {\n\t\twindow.location = window.location.href.split(\"#\")[0];\n\t};\n\tapiFetch({ path: '/wp/v2/plugins' }).then((plugins) => {\n\n\t\tplugins.forEach((plugin) => {\n\t\t\tconst name = plugin.plugin;\n\t\t\tconst status = plugin.status;\n\t\t\tconst checkName = name.slice(0, name.indexOf(\"/\"));\n\t\t\tconst pluginName = name.slice(0, pluginPath.indexOf(\"/\"));\n\n\t\t\tif (checkName === pluginName && status === 'active') {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\treload();\n\t\t\t\t}, \"1000\");\n\t\t\t}\n\t\t})\n\t})\n}","import { __ } from '@wordpress/i18n';\nimport { useEffect, useState } from 'react';\nimport { Button, Modal, Spinner, __experimentalText as Text } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport FetchPlugin from './FetchPlugin.js';\n\n/**\n * Editor css.\n */\nimport './editor.scss';\n\nexport default function Edit(props) {\n\tconst { attributes } = props;\n\tconst { pluginPath, pluginName, text } = attributes;\n\n\tconst textdomain = \"am-faux-blocks\";\n\n\tconst postEditorInstance = wp.data.select('core/editor');\n\tconst isPostEditScreen = 'undefined' !== typeof (postEditorInstance) && postEditorInstance?.getCurrentPostId();\n\n\tconst { removeBlock } = useDispatch('core/block-editor');\n\n\tconst { autosave, getEditedPostContent } = isPostEditScreen\n\t\t? {\n\t\t\tautosave: useDispatch('core/editor').autosave,\n\t\t\tgetEditedPostContent: useSelect('core/editor').getEditedPostContent,\n\t\t}\n\t\t: { autosave: false, getEditedPostContent: false };\n\n\tconst [show, setShow] = useState(false);\n\tconst handleShow = () => setShow(true);\n\tconst handleClose = (refresh = true) => {\n\t\tremoveBlock(props.clientId);\n\t\tif (isPostEditScreen && getEditedPostContent()) {\n\t\t\tautosave();\n\t\t}\n\n\t\tsetShow(false);\n\t\tif (refresh) {\n\t\t\t//checks if the plugin is activated and reloads the page.\n\t\t\tFetchPlugin(pluginPath);\n\t\t}\n\t};\n\n\tconst installPlugin = () => {\n\t\tconst nonce = fauxData.nonce;\n\t\tconst actionUrl = fauxData.siteUrl;\n\t\tconst button = document.getElementById('faux-install-button');\n\t\tconst installText = document.getElementById('faux-install-text');\n\t\tconst wpOrgText = document.getElementById('faux-wporg-text');\n\t\tconst linkButton = document.querySelector('.faux-modal .is-link');\n\t\tconst spinner = document.querySelector('.components-spinner');\n\n\t\tconst data = {\n\t\t\t'action': 'am_faux_install',\n\t\t\t'nonce': nonce,\n\t\t\t'plugin': pluginPath,\n\t\t}\n\n\t\tconst url = new URL(actionUrl);\n\t\turl.search = new URLSearchParams(data).toString();\n\n\t\tbutton.innerHTML = \"Enabling custom \" + text + \" blocks...\";\n\t\tlinkButton.style = \"display: none\";\n\t\twpOrgText.style = \"display: none\";\n\t\tspinner.style = \"display: inline-block\";\n\n\t\tfetch(url, {\n\t\t\tcache: 'no-cache',\n\t\t\theaders: {\n\t\t\t\t'user-agent': 'Faux Block',\n\t\t\t\t'content-type': 'application/json'\n\t\t\t},\n\t\t\tmethod: 'POST',\n\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\tbutton.innerHTML = \"Begin using new block\";\n\t\t\t\t\tspinner.style = \"display: none\";\n\t\t\t\t\tinstallText.innerHTML = \"A page refresh is required to load the new custom blocks in the editor. You won't loose any changes. Click the button below to refresh and start using your new custom blocks\";\n\t\t\t\t\tbutton.addEventListener('click', function (event) {\n\t\t\t\t\t\thandleClose();\n\t\t\t\t\t}, false);\n\t\t\t\t} else {\n\t\t\t\t\tbutton.innerHTML = \"There was a problem with the plugin install\";\n\t\t\t\t}\n\t\t\t})\n\t};\n\n\tuseEffect(() => {\n\t\thandleShow();\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<Modal title={__('Easy Install Custom ' + text, textdomain)} show={show} onRequestClose={() => handleClose(false)} className={\"faux-modal\"} >\n\t\t\t\t<div>\n\t\t\t\t\t<Text id=\"faux-install-text\" isBlock={true} >\n\t\t\t\t\t\t{__(pluginName + ' is the best ' + text + ' plugin for WordPress! And it\\'s free!', textdomain)}\n\t\t\t\t\t</Text>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<Button id=\"faux-install-button\" variant=\"primary\" onClick={installPlugin} >\n\t\t\t\t\t\t\t{__('Enable custom ' + text + ' blocks', textdomain)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</p>\n\t\t\t\t\t<Spinner />\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<Text id=\"faux-wporg-text\" >\n\t\t\t\t\t\t\t{__('Clicking the above button will install and activate ' + pluginName + ' from the WordPress.org repository', textdomain)}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<Button variant=\"link\" onClick={() => handleClose(false)}>\n\t\t\t\t\t\t\t{__('I don\\'t want to add custom ' + text + ' at this point (close window)', textdomain)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</>\n\t);\n}","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Registers a new faux block.\n *\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\nimport metadata from './block.json';\nimport Edit from '../edit.js';\n\n/**\n * Register\n */\n\nregisterBlockType( metadata.name, {\n\tattributes: {\n        text: {\n            type: 'string',\n\t\t\tdefault: 'Giveaway'\n        },\n\t\tpluginName: {\n            type: 'string',\n\t\t\tdefault: 'RafflePress'\n        },\n\t\tpluginPath: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'rafflepress/rafflepress.php'\n\t\t}\n\t},\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n\tsave: function () {\n\t\treturn (<></>);\n\t},\n} );\n\n"],"names":["apiFetch","FetchPlugin","pluginPath","reload","window","location","href","split","path","then","plugins","forEach","plugin","name","status","checkName","slice","indexOf","pluginName","setTimeout","__","useEffect","useState","Button","Modal","Spinner","__experimentalText","Text","useDispatch","useSelect","Edit","props","attributes","text","textdomain","postEditorInstance","wp","data","select","isPostEditScreen","getCurrentPostId","removeBlock","autosave","getEditedPostContent","show","setShow","handleShow","handleClose","refresh","clientId","installPlugin","nonce","fauxData","actionUrl","siteUrl","button","document","getElementById","installText","wpOrgText","linkButton","querySelector","spinner","url","URL","search","URLSearchParams","toString","innerHTML","style","fetch","cache","headers","method","response","ok","addEventListener","event","createElement","Fragment","title","onRequestClose","className","id","isBlock","variant","onClick","registerBlockType","metadata","type","default","edit","save"],"sourceRoot":""}